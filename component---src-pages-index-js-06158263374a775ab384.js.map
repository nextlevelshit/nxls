{"version":3,"file":"component---src-pages-index-js-06158263374a775ab384.js","mappings":"oHAAA,IAAIA,EAAY,CACdC,EAAG,IACHC,GAAI,IACJC,EAAG,IACHC,GAAI,IACJC,EAAG,IACHC,GAAI,GACJC,EAAG,GACHC,GAAI,GACJC,EAAG,GACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,EAAG,GAEDC,EAAWC,OAAOC,KAAKhB,GACvBiB,EAAcF,OAAOG,OAAOlB,GAqChCmB,EAAOC,QAAU,CACfC,WAnBe,SAAoBC,GAKnC,IAJA,IAAIC,EAAcD,EAASE,cACvBC,EAAS,EACTC,EAAYH,EAAYI,OAErBD,KAAa,CAClB,IAAIE,EAAa5B,EAAUuB,EAAYG,IAEnCE,EAAa5B,EAAUuB,EAAYG,EAAY,IACjDD,GAAUG,EAEVH,GAAUG,EAId,OAAOH,GAKPI,SArCa,SAAkBC,GAC/B,GAAIA,GAAW,QAAwB,IAAZA,GAA8C,iBAAZA,EAC3D,MAAM,IAAIC,MAAM,gCAKlB,IAFA,IAAIC,EAAQ,GAEHC,EAAI,EAAGA,EAAInB,EAASa,OAAQM,IACnC,KAAOH,GAAWb,EAAYgB,IAC5BH,GAAWb,EAAYgB,GACvBD,GAASlB,EAASmB,GAItB,OAAOD,GAwBPlB,SAAUA,EACVG,YAAaA,I,kICzDXiB,EAAU,EACVC,EAAU,GCyBd,EAvB4B,SAA+BC,EAAIC,QAC/C,IAAVA,IACFA,EAAQ,GAGV,IAAIC,GAAiB,IAAAC,SAAO,gBAC5B,IAAAC,YAAU,WACRF,EAAeG,QAAUL,MAE3B,IAAAI,YAAU,WACR,GAAc,OAAVH,EAAgB,CAClB,IAAIK,EDXgB,SAA6BN,EAAIO,GACzD,IAAIC,EAEAC,EAAKX,IAET,GAAIC,EAAQQ,GACVR,EAAQQ,GAAIG,UAAUD,GAAMT,MACvB,CACL,IAAIW,EAAQC,aAAY,WAKtB,IAJA,IAEIC,EAFAH,EAAYX,EAAQQ,GAAIG,UACxBI,GAAW,EAGNC,EAAK,EAAGP,EAAK7B,OAAOG,OAAO4B,GAAYK,EAAKP,EAAGjB,OAAQwB,IAAM,CACpE,IAAIC,EAAWR,EAAGO,GAElB,IACEC,IACA,MAAOC,GACPH,GAAW,EACXD,EAAYI,GAIhB,GAAIH,EAAU,MAAMD,IACnBN,GACHR,EAAQQ,GAAM,CACZA,GAAIA,EACJI,MAAOA,EACPD,WAAYF,EAAK,GAAIA,EAAGC,GAAMT,EAAIQ,IAItC,MAAO,CACLU,OAAQnB,EAAQQ,GAChBE,GAAIA,GCxBeU,EAAoB,WACnC,OAAOjB,EAAeG,YACrBJ,GACH,OAAO,WACL,ODwBoB,SAA+BO,GACzD,IAAIU,EAASV,EAAGU,OACZT,EAAKD,EAAGC,UACLS,EAAOR,UAAUD,GACxB,IAAIW,GAAe,EAEnB,IAAK,IAAIJ,KAAYE,EAAOR,UAAW,CACrCU,GAAe,EACf,MAGGA,IACHC,cAAcH,EAAOP,cACdZ,EAAQmB,EAAOX,KCrCXe,CAAsBhB,OAKhC,CAACL,KCjBN,EAJoB,SAAuBsB,IACzC,IAAAnB,WAAUmB,EAAQ,K,UCEPC,EAAQ,WACpB,IAIA,GAAsBC,EAAAA,EAAAA,WAAS,GAAxBC,EAAP,KAAaC,EAAb,KACA,GAAwBF,EAAAA,EAAAA,UAAS,MAApBG,GAAb,WACA,GAAwBH,EAAAA,EAAAA,UAAS,CAAC,+BAA3BI,EAAP,KAAaC,EAAb,KACOC,EAAaF,EAApB,GAAYG,EAAQH,EAApB,GACA,EAA0C,EACzCJ,EAAAA,EAAAA,UAAS,IACTA,EAAAA,EAAAA,UAAS,IACTA,EAAAA,EAAAA,UAAS,IAHV,OAAQQ,EAAR,KAAWC,EAAX,YAAmBC,EAAnB,KAAsBC,EAAtB,YAA8BC,EAA9B,KAAiCC,EAAjC,KAKMC,EAAY,SAACC,GAClB,IAAMC,EAAOC,SAASF,GACtBG,MAASC,gCAAWH,EAAf,QACHI,MAAK,SAACC,GACN,OAAOA,EAAIC,UAEXF,MAAK,SAACG,GACN,IACmC,IACK,YAMhC,IAID,YAZCC,EAAWD,EAAXC,GAAIC,EAAOF,EAAPE,GACRT,GAAO,IAAIU,MAAOC,YACjB,UAAAF,EAAGG,eAAH,SAAYtB,KAAZ,UAAmBmB,EAAGI,cAAtB,OAAmB,EAAWvB,KACjCJ,GAAM,GACNG,EAAQ,qBACPoB,EAAGG,eADI,aACP,EAAYtB,WADL,kBACYmB,EAAGI,cADf,aACY,EAAWvB,IADvB,oBAEPmB,EAAGG,eAFI,aAEP,EAAYrB,YAFL,kBAEakB,EAAGI,cAFhB,aAEa,EAAWtB,SAGhCL,GAAM,GACNG,EAAQ,CAACA,EAAQ,WAACmB,EAAGK,cAAJ,aAAC,EAAWvB,IAAZ,UAAiBkB,EAAGK,cAApB,aAAiB,EAAWtB,WAG9CL,GAAM,GACNG,EAAQ,qBACPmB,EAAGI,eADI,aACP,EAAYtB,WADL,kBACYkB,EAAGK,cADf,aACY,EAAWvB,IADvB,oBAEPkB,EAAGI,eAFI,aAEP,EAAYrB,YAFL,kBAEaiB,EAAGK,cAFhB,aAEa,EAAWtB,QAGjCJ,EAAQoB,GACRO,QAAQC,IAAIR,OAYTS,EAAS,WACd,MAJO,CAJG,IAAK,IAAIN,MAAOO,WAChB,IAAM,KAAM,IAAIP,MAAOQ,cAAcC,OAAO,GAC5C,IAAM,KAAM,IAAIT,MAAOU,cAAcD,OAAO,IAM/CE,EAAP,KAAcC,EAAd,KAAqBC,EAArB,KAEMC,EAAeD,EADHA,EAAQ,EAG1B9B,EAAK4B,GACL1B,EAAK2B,GACLzB,EAAK2B,GAEDF,IAAU5B,GACbI,EAAUuB,EAAQC,IAIpBG,GAAsB,WACrBT,MACE,KAEHU,GAAc,kBAAMV,OAEpB,IAAMW,EAASpC,MAAAA,OAAH,EAAGA,EAAMqC,QACpB,gBACA,wDAGD,OACC,gBAAKC,UCnFW,4BDmFhB,UACC,6BACC,+BACErC,GAAKE,GAAKE,GACV,gBACCkC,QAAS,kBAAMhC,EAAUN,EAAIE,IAC7BqC,KAAM,SACNC,SAAU,EACVC,UAAW,gCAJZ,UAMEzC,EANF,IAQEE,EACAT,GAAQwB,GATV,IAWEb,EAAI,GAAI,2BAAO5C,EAAAA,EAAAA,UAASiD,SAASL,MAAc,QAGjD,yBACC,kCAIDL,GACA,cACC2C,wBAAyB,CACxBP,OAAAA,MAIF,uBAAIrC,QAGN,6BACC,sCAAc,KAAd,yBAML","sources":["webpack://gatsby-starter-default/../../node_modules/romans/romans.js","webpack://gatsby-starter-default/../../node_modules/set-harmonic-interval/lib/index.esm.js","webpack://gatsby-starter-default/../../node_modules/react-use/esm/useHarmonicIntervalFn.js","webpack://gatsby-starter-default/../../node_modules/react-use/esm/useEffectOnce.js","webpack://gatsby-starter-default/./src/pages/index.js","webpack://gatsby-starter-default/./src/pages/index.module.css"],"sourcesContent":["var roman_map = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XL: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1\n};\nvar allChars = Object.keys(roman_map);\nvar allNumerals = Object.values(roman_map);\n\nvar romanize = function romanize(decimal) {\n  if (decimal <= 0 || typeof decimal === 'undefined' || typeof decimal === 'string') {\n    throw new Error('requires an unsigned integer');\n  }\n\n  var roman = '';\n\n  for (var i = 0; i < allChars.length; i++) {\n    while (decimal >= allNumerals[i]) {\n      decimal -= allNumerals[i];\n      roman += allChars[i];\n    }\n  }\n\n  return roman;\n};\n\nvar deromanize = function deromanize(romanStr) {\n  var romanString = romanStr.toUpperCase();\n  var arabic = 0;\n  var iteration = romanString.length;\n\n  while (iteration--) {\n    var cumulative = roman_map[romanString[iteration]];\n\n    if (cumulative < roman_map[romanString[iteration + 1]]) {\n      arabic -= cumulative;\n    } else {\n      arabic += cumulative;\n    }\n  }\n\n  return arabic;\n};\n\nmodule.exports = {\n  deromanize: deromanize,\n  romanize: romanize,\n  allChars: allChars,\n  allNumerals: allNumerals\n};","var counter = 0;\nvar buckets = {};\n\nvar setHarmonicInterval = function setHarmonicInterval(fn, ms) {\n  var _a;\n\n  var id = counter++;\n\n  if (buckets[ms]) {\n    buckets[ms].listeners[id] = fn;\n  } else {\n    var timer = setInterval(function () {\n      var listeners = buckets[ms].listeners;\n      var didThrow = false;\n      var lastError;\n\n      for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {\n        var listener = _a[_i];\n\n        try {\n          listener();\n        } catch (error) {\n          didThrow = true;\n          lastError = error;\n        }\n      }\n\n      if (didThrow) throw lastError;\n    }, ms);\n    buckets[ms] = {\n      ms: ms,\n      timer: timer,\n      listeners: (_a = {}, _a[id] = fn, _a)\n    };\n  }\n\n  return {\n    bucket: buckets[ms],\n    id: id\n  };\n};\n\nvar clearHarmonicInterval = function clearHarmonicInterval(_a) {\n  var bucket = _a.bucket,\n      id = _a.id;\n  delete bucket.listeners[id];\n  var hasListeners = false;\n\n  for (var listener in bucket.listeners) {\n    hasListeners = true;\n    break;\n  }\n\n  if (!hasListeners) {\n    clearInterval(bucket.timer);\n    delete buckets[bucket.ms];\n  }\n};\n\nexport { clearHarmonicInterval, setHarmonicInterval };","import { useEffect, useRef } from 'react';\nimport { clearHarmonicInterval, setHarmonicInterval } from 'set-harmonic-interval';\n\nvar useHarmonicIntervalFn = function useHarmonicIntervalFn(fn, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  var latestCallback = useRef(function () {});\n  useEffect(function () {\n    latestCallback.current = fn;\n  });\n  useEffect(function () {\n    if (delay !== null) {\n      var interval_1 = setHarmonicInterval(function () {\n        return latestCallback.current();\n      }, delay);\n      return function () {\n        return clearHarmonicInterval(interval_1);\n      };\n    }\n\n    return undefined;\n  }, [delay]);\n};\n\nexport default useHarmonicIntervalFn;","import { useEffect } from 'react';\n\nvar useEffectOnce = function useEffectOnce(effect) {\n  useEffect(effect, []);\n};\n\nexport default useEffectOnce;","import React, { useState } from \"react\"\nimport { romanize } from \"romans\"\nimport * as styles from \"./index.module.css\"\nimport { useEffectOnce, useHarmonicIntervalFn } from \"react-use\"\n\nexport const Index = () => {\n\tconst baseUrl =\n\t\t\"development\" === process.env.NODE_ENV\n\t\t\t? \"http://0.0.0.0:3333/api\"\n\t\t\t: \"https://tengo.uber.space/api\"\n\tconst [isBC, setBC] = useState(false)\n\tconst [full, setFull] = useState(null)\n\tconst [wiki, setWiki] = useState([\"Waiting is not a crime ...\"])\n\tconst [raw, html] = wiki\n\tconst [[h, setH], [m, setM], [s, setS]] = [\n\t\tuseState(0),\n\t\tuseState(0),\n\t\tuseState(0),\n\t]\n\tconst fetchData = (query) => {\n\t\tconst year = parseInt(query)\n\t\tfetch(`${baseUrl}/${year}/all`)\n\t\t\t.then((res) => {\n\t\t\t\treturn res.json()\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconst { AC, BC } = data\n\t\t\t\tif (year > new Date().getFullYear) {\n\t\t\t\t\tif (BC.closest?.raw || BC.random?.raw) {\n\t\t\t\t\t\tsetBC(true)\n\t\t\t\t\t\tsetWiki([\n\t\t\t\t\t\t\tBC.closest?.raw ?? BC.random?.raw,\n\t\t\t\t\t\t\tBC.closest?.html ?? BC.random?.html,\n\t\t\t\t\t\t])\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetBC(false)\n\t\t\t\t\t\tsetWiki([setWiki([AC.random?.raw, AC.random?.html])])\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetBC(false)\n\t\t\t\t\tsetWiki([\n\t\t\t\t\t\tAC.closest?.raw ?? AC.random?.raw,\n\t\t\t\t\t\tAC.closest?.html ?? AC.random?.html,\n\t\t\t\t\t])\n\t\t\t\t}\n\t\t\t\tsetFull(data)\n\t\t\t\tconsole.log(data)\n\t\t\t})\n\t}\n\n\tconst useTime = () => {\n\t\tconst h = \"\" + new Date().getHours()\n\t\tconst m = \"\" + (\"0\" + new Date().getMinutes()).slice(-2)\n\t\tconst s = \"\" + (\"0\" + new Date().getSeconds()).slice(-2)\n\n\t\treturn [h, m, s]\n\t}\n\n\tconst update = () => {\n\t\tconst [nextH, nextM, nextS] = useTime()\n\t\tconst remainerS = nextS % 5\n\t\tconst roundedNextS = nextS - remainerS\n\n\t\tsetH(nextH)\n\t\tsetM(nextM)\n\t\tsetS(roundedNextS)\n\n\t\tif (nextM !== m) {\n\t\t\tfetchData(nextH + nextM)\n\t\t}\n\t}\n\n\tuseHarmonicIntervalFn(() => {\n\t\tupdate()\n\t}, 1000)\n\n\tuseEffectOnce(() => update())\n\n\tconst __html = html?.replace(\n\t\t/href=\\\"\\.\\//gm,\n\t\t'target=\"_blank\" href=\"https://en.wikipedia.org/wiki/'\n\t)\n\n\treturn (\n\t\t<div className={styles.page}>\n\t\t\t<main>\n\t\t\t\t<article>\n\t\t\t\t\t{h && m && s ? (\n\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\tonClick={() => fetchData(h + m)}\n\t\t\t\t\t\t\trole={\"button\"}\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\tariaLabel={\"Get another WikiPedia article\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{h}\n\t\t\t\t\t\t\t&#8239;\n\t\t\t\t\t\t\t{m}\n\t\t\t\t\t\t\t{isBC && BC}\n\t\t\t\t\t\t\t&#8239;\n\t\t\t\t\t\t\t{s > 0 ? <span>{romanize(parseInt(s))}</span> : \"·\"}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{html ? (\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>{raw}</p>\n\t\t\t\t\t)}\n\t\t\t\t</article>\n\t\t\t\t<footer>\n\t\t\t\t\t<center>with {\"<3\"} dailysh.it</center>\n\t\t\t\t</footer>\n\t\t\t</main>\n\t\t</div>\n\t)\n}\nexport default Index\n","// extracted by mini-css-extract-plugin\nexport var page = \"index-module--page--3eaQQ\";\nexport var bc = \"index-module--bc--2MECj\";"],"names":["roman_map","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","allChars","Object","keys","allNumerals","values","module","exports","deromanize","romanStr","romanString","toUpperCase","arabic","iteration","length","cumulative","romanize","decimal","Error","roman","i","counter","buckets","fn","delay","latestCallback","useRef","useEffect","current","interval_1","ms","_a","id","listeners","timer","setInterval","lastError","didThrow","_i","listener","error","bucket","setHarmonicInterval","hasListeners","clearInterval","clearHarmonicInterval","effect","Index","useState","isBC","setBC","setFull","wiki","setWiki","raw","html","h","setH","m","setM","s","setS","fetchData","query","year","parseInt","fetch","baseUrl","then","res","json","data","AC","BC","Date","getFullYear","closest","random","console","log","update","getHours","getMinutes","slice","getSeconds","nextH","nextM","nextS","roundedNextS","useHarmonicIntervalFn","useEffectOnce","__html","replace","className","onClick","role","tabIndex","ariaLabel","dangerouslySetInnerHTML"],"sourceRoot":""}