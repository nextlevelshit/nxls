{"version":3,"file":"component---src-pages-index-js-16f221d1a787ffca1bee.js","mappings":"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","sources":["webpack://gatsby-starter-default/../../node_modules/set-harmonic-interval/lib/index.esm.js","webpack://gatsby-starter-default/../../node_modules/react-use/esm/useHarmonicIntervalFn.js","webpack://gatsby-starter-default/./src/pages/index.js","webpack://gatsby-starter-default/./src/pages/index.module.css"],"sourcesContent":["var counter = 0;\nvar buckets = {};\n\nvar setHarmonicInterval = function setHarmonicInterval(fn, ms) {\n  var _a;\n\n  var id = counter++;\n\n  if (buckets[ms]) {\n    buckets[ms].listeners[id] = fn;\n  } else {\n    var timer = setInterval(function () {\n      var listeners = buckets[ms].listeners;\n      var didThrow = false;\n      var lastError;\n\n      for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {\n        var listener = _a[_i];\n\n        try {\n          listener();\n        } catch (error) {\n          didThrow = true;\n          lastError = error;\n        }\n      }\n\n      if (didThrow) throw lastError;\n    }, ms);\n    buckets[ms] = {\n      ms: ms,\n      timer: timer,\n      listeners: (_a = {}, _a[id] = fn, _a)\n    };\n  }\n\n  return {\n    bucket: buckets[ms],\n    id: id\n  };\n};\n\nvar clearHarmonicInterval = function clearHarmonicInterval(_a) {\n  var bucket = _a.bucket,\n      id = _a.id;\n  delete bucket.listeners[id];\n  var hasListeners = false;\n\n  for (var listener in bucket.listeners) {\n    hasListeners = true;\n    break;\n  }\n\n  if (!hasListeners) {\n    clearInterval(bucket.timer);\n    delete buckets[bucket.ms];\n  }\n};\n\nexport { clearHarmonicInterval, setHarmonicInterval };","import { useEffect, useRef } from 'react';\nimport { clearHarmonicInterval, setHarmonicInterval } from 'set-harmonic-interval';\n\nvar useHarmonicIntervalFn = function useHarmonicIntervalFn(fn, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  var latestCallback = useRef(function () {});\n  useEffect(function () {\n    latestCallback.current = fn;\n  });\n  useEffect(function () {\n    if (delay !== null) {\n      var interval_1 = setHarmonicInterval(function () {\n        return latestCallback.current();\n      }, delay);\n      return function () {\n        return clearHarmonicInterval(interval_1);\n      };\n    }\n\n    return undefined;\n  }, [delay]);\n};\n\nexport default useHarmonicIntervalFn;","import React, { useState } from \"react\"\nimport * as styles from \"./index.module.css\"\nimport { useHarmonicIntervalFn } from \"react-use\"\n\nexport const Index = () => {\n\tconst baseUrl =\n\t\t\"development\" === process.env.NODE_ENV\n\t\t\t? \"http://0.0.0.0:3333/api\"\n\t\t\t: \"https://tengo.uber.space/api\"\n\tconst [full, setFull] = useState(null)\n\tconst [wiki, setWiki] = useState([\"Waiting is not a crime ...\"])\n\tconst [raw, html] = wiki\n\tconst [[h, setH], [m, setM], [s, setS]] = [\n\t\tuseState(null),\n\t\tuseState(null),\n\t\tuseState(null),\n\t]\n\tconst fetchData = (query) => {\n\t\tconst year = parseInt(query)\n\t\tfetch(`${baseUrl}/${year}/all`)\n\t\t\t.then((res) => {\n\t\t\t\treturn res.json()\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(data)\n\t\t\t\tconst { AC, BC } = data\n\t\t\t\tsetFull(data)\n\t\t\t\tif (year > new Date().getFullYear) {\n\t\t\t\t\tsetWiki([\n\t\t\t\t\t\tBC.closest?.raw ?? BC.random?.raw ?? AC.random?.raw,\n\t\t\t\t\t\tBC.closest?.html ?? BC.random?.html ?? AC.random?.html,\n\t\t\t\t\t])\n\t\t\t\t} else {\n\t\t\t\t\tsetWiki([\n\t\t\t\t\t\tAC.closest?.raw ?? AC.random?.raw,\n\t\t\t\t\t\tAC.closest?.html ?? AC.random?.html,\n\t\t\t\t\t])\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tuseHarmonicIntervalFn(() => {\n\t\tconst nextH = \"\" + new Date().getHours()\n\t\tconst nextM = \"\" + (\"0\" + new Date().getMinutes()).slice(-2)\n\t\tconst nextS = \"\" + (\"0\" + new Date().getSeconds()).slice(-2)\n\n\t\tif (nextM !== m) {\n\t\t\tsetM(nextM)\n\t\t\tfetchData(nextH + nextM)\n\t\t}\n\n\t\tif (nextH !== h) {\n\t\t\tsetH(nextH)\n\t\t}\n\n\t\tif (nextS !== s) {\n\t\t\tsetS(nextS)\n\t\t}\n\t}, 1000)\n\n\tconst __html = html?.replace(\n\t\t/href=\\\"\\.\\//gm,\n\t\t'target=\"_blank\" href=\"https://en.wikipedia.org/wiki/'\n\t)\n\n\treturn (\n\t\t<div className={styles.page}>\n\t\t\t<main>\n\t\t\t\t<article>\n\t\t\t\t\t{h && m && s && (\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t{h}&#8239;\n\t\t\t\t\t\t\t{m}\n\t\t\t\t\t\t\t<span>:</span>\n\t\t\t\t\t\t\t<span>{s}</span>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{html ? (\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>{raw}</p>\n\t\t\t\t\t)}\n\t\t\t\t</article>\n\t\t\t\t<footer>\n\t\t\t\t\t<center>with {\"<3\"} dailysh.it</center>\n\t\t\t\t</footer>\n\t\t\t</main>\n\t\t</div>\n\t)\n}\nexport default Index\n","// extracted by mini-css-extract-plugin\nexport var page = \"index-module--page--3eaQQ\";"],"names":["counter","buckets","fn","delay","latestCallback","useRef","useEffect","current","interval_1","ms","_a","id","listeners","timer","setInterval","lastError","didThrow","_i","Object","values","length","listener","error","bucket","setHarmonicInterval","hasListeners","clearInterval","clearHarmonicInterval","Index","useState","setFull","wiki","setWiki","raw","html","h","setH","m","setM","s","setS","useHarmonicIntervalFn","year","nextH","Date","getHours","nextM","getMinutes","slice","nextS","getSeconds","parseInt","fetch","baseUrl","then","res","json","data","console","log","AC","BC","getFullYear","closest","random","__html","replace","className","dangerouslySetInnerHTML"],"sourceRoot":""}