{"version":3,"file":"component---src-pages-index-js-bea3d902caf8ad5adf1c.js","mappings":"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","sources":["webpack://gatsby-starter-default/../../node_modules/romans/romans.js","webpack://gatsby-starter-default/../../node_modules/set-harmonic-interval/lib/index.esm.js","webpack://gatsby-starter-default/../../node_modules/react-use/esm/useHarmonicIntervalFn.js","webpack://gatsby-starter-default/../../node_modules/react-use/esm/useEffectOnce.js","webpack://gatsby-starter-default/./src/pages/index.js","webpack://gatsby-starter-default/./src/pages/index.module.css"],"sourcesContent":["var roman_map = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XL: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1\n};\nvar allChars = Object.keys(roman_map);\nvar allNumerals = Object.values(roman_map);\n\nvar romanize = function romanize(decimal) {\n  if (decimal <= 0 || typeof decimal === 'undefined' || typeof decimal === 'string') {\n    throw new Error('requires an unsigned integer');\n  }\n\n  var roman = '';\n\n  for (var i = 0; i < allChars.length; i++) {\n    while (decimal >= allNumerals[i]) {\n      decimal -= allNumerals[i];\n      roman += allChars[i];\n    }\n  }\n\n  return roman;\n};\n\nvar deromanize = function deromanize(romanStr) {\n  var romanString = romanStr.toUpperCase();\n  var arabic = 0;\n  var iteration = romanString.length;\n\n  while (iteration--) {\n    var cumulative = roman_map[romanString[iteration]];\n\n    if (cumulative < roman_map[romanString[iteration + 1]]) {\n      arabic -= cumulative;\n    } else {\n      arabic += cumulative;\n    }\n  }\n\n  return arabic;\n};\n\nmodule.exports = {\n  deromanize: deromanize,\n  romanize: romanize,\n  allChars: allChars,\n  allNumerals: allNumerals\n};","var counter = 0;\nvar buckets = {};\n\nvar setHarmonicInterval = function setHarmonicInterval(fn, ms) {\n  var _a;\n\n  var id = counter++;\n\n  if (buckets[ms]) {\n    buckets[ms].listeners[id] = fn;\n  } else {\n    var timer = setInterval(function () {\n      var listeners = buckets[ms].listeners;\n      var didThrow = false;\n      var lastError;\n\n      for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {\n        var listener = _a[_i];\n\n        try {\n          listener();\n        } catch (error) {\n          didThrow = true;\n          lastError = error;\n        }\n      }\n\n      if (didThrow) throw lastError;\n    }, ms);\n    buckets[ms] = {\n      ms: ms,\n      timer: timer,\n      listeners: (_a = {}, _a[id] = fn, _a)\n    };\n  }\n\n  return {\n    bucket: buckets[ms],\n    id: id\n  };\n};\n\nvar clearHarmonicInterval = function clearHarmonicInterval(_a) {\n  var bucket = _a.bucket,\n      id = _a.id;\n  delete bucket.listeners[id];\n  var hasListeners = false;\n\n  for (var listener in bucket.listeners) {\n    hasListeners = true;\n    break;\n  }\n\n  if (!hasListeners) {\n    clearInterval(bucket.timer);\n    delete buckets[bucket.ms];\n  }\n};\n\nexport { clearHarmonicInterval, setHarmonicInterval };","import { useEffect, useRef } from 'react';\nimport { clearHarmonicInterval, setHarmonicInterval } from 'set-harmonic-interval';\n\nvar useHarmonicIntervalFn = function useHarmonicIntervalFn(fn, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  var latestCallback = useRef(function () {});\n  useEffect(function () {\n    latestCallback.current = fn;\n  });\n  useEffect(function () {\n    if (delay !== null) {\n      var interval_1 = setHarmonicInterval(function () {\n        return latestCallback.current();\n      }, delay);\n      return function () {\n        return clearHarmonicInterval(interval_1);\n      };\n    }\n\n    return undefined;\n  }, [delay]);\n};\n\nexport default useHarmonicIntervalFn;","import { useEffect } from 'react';\n\nvar useEffectOnce = function useEffectOnce(effect) {\n  useEffect(effect, []);\n};\n\nexport default useEffectOnce;","import React, { useState } from \"react\"\nimport { romanize } from \"romans\"\nimport * as styles from \"./index.module.css\"\nimport { useEffectOnce, useHarmonicIntervalFn } from \"react-use\"\n\nconst isDebug = \"development\" === process.env.NODE_ENV\n\nconst Index = () => {\n\tconst baseUrl = isDebug\n\t\t? \"http://0.0.0.0:3333/api\"\n\t\t: \"https://tengo.uber.space/api\"\n\tconst [isBC, setBC] = useState(false)\n\tconst [topic, setTopic] = useState(\"events\")\n\tconst [pulse, setPulse] = useState(false)\n\tconst wikiDefault = [\"Waiting is not a crime ...\"]\n\tconst [full, setFull] = useState(null)\n\tconst [wiki, setWiki] = useState(wikiDefault)\n\tconst [raw, html] = wiki\n\tconst [[h, setH], [m, setM], [s, setS]] = [\n\t\tuseState(0),\n\t\tuseState(0),\n\t\tuseState(0),\n\t]\n\tconst fetchData = (query) => {\n\t\tsetWiki(wikiDefault)\n\t\tconst year = parseInt(query)\n\t\tfetch(`${baseUrl}/${year}/all`)\n\t\t\t.then((res) => {\n\t\t\t\treturn res.json()\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconst { AC, BC } = data\n\t\t\t\tlet category = AC\n\t\t\t\tif (year > new Date().getFullYear() || year < 200) {\n\t\t\t\t\tcategory = BC\n\t\t\t\t\tsetBC(true)\n\t\t\t\t} else {\n\t\t\t\t\tsetBC(false)\n\t\t\t\t}\n\t\t\t\tconst item = category[topic]\n\n\t\t\t\tsetWiki([\n\t\t\t\t\titem.closest?.raw || item.random?.raw,\n\t\t\t\t\titem.closest?.html || item.random?.html,\n\t\t\t\t])\n\t\t\t\tsetFull(data)\n\t\t\t})\n\t}\n\n\tconst useTime = () => {\n\t\tconst h = new Date().getHours().toString()\n\t\tconst m = (\"0\" + new Date().getMinutes()).slice(-2).toString()\n\t\tconst s = (\"0\" + new Date().getSeconds()).slice(-2).toString()\n\n\t\treturn [h, m, s]\n\t}\n\n\t/**\n\t * @param interval number - in miliseconds (optional)\n\t */\n\tconst update = (interval = 5000) => {\n\t\tconst [nextH, nextM, nextS] = useTime()\n\t\tconst remainerS = nextS % (interval * 0.001)\n\t\tconst roundedNextS = Math.floor(nextS - remainerS)\n\n\t\tsetS(roundedNextS)\n\t\tsetM(nextM)\n\t\tsetH(nextH)\n\n\t\tif (nextM !== m) {\n\t\t\tfetchData(nextH + nextM)\n\t\t}\n\t}\n\n\tconst updateEachSecond = () => update(1000)\n\n\tconst toggleTopic = () => {\n\t\tconst topics = [\"births\", \"deaths\", \"events\"]\n\t\tconst key = (topics.findIndex((t) => topic === t) + 1) % topics.length\n\n\t\tsetTopic(topics[key])\n\t\tfetchData(h + m)\n\t}\n\n\tconst useTopics = () => {\n\t\tconst list = [\n\t\t\t[\"births\", \"So, who was born\"],\n\t\t\t[\"deaths\", \"So, who died\"],\n\t\t\t[\"events\", \"So, what happend\"],\n\t\t]\n\t\tconst map = new Map(list)\n\t\tconst prefix = map.get(topic)\n\t\tconst topics = map.keys()\n\n\t\treturn { list, map, prefix, topics }\n\t}\n\n\tuseHarmonicIntervalFn(() => {\n\t\tupdateEachSecond()\n\t}, 1000)\n\n\tuseHarmonicIntervalFn(() => {\n\t\tsetPulse(!pulse)\n\t}, 1000)\n\n\tuseEffectOnce(() => updateEachSecond())\n\n\tconst __html = html?.replace(\n\t\t/href=\\\"\\.\\//gm,\n\t\t'target=\"_blank\" href=\"https://en.wikipedia.org/wiki/'\n\t)\n\n\tconst { prefix } = useTopics()\n\n\treturn (\n\t\t<div className={styles.page}>\n\t\t\t<hr\n\t\t\t\tstyle={{\n\t\t\t\t\theight: Math.abs(Math.cos((s / 60) * Math.PI)) * 100 + \"vh\",\n\t\t\t\t\t// opacity: (s / 60) * 100 + \"%\",\n\t\t\t\t\t// background: pulse ? \"#70A9A1\" : \"#F6F1D1\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<main>\n\t\t\t\t<article>\n\t\t\t\t\t{h && m ? (\n\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\tonClick={() => toggleTopic()}\n\t\t\t\t\t\t\trole={\"button\"}\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\taria-label={\"Get another WikiPedia article\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tIt is {h}\n\t\t\t\t\t\t\t\t{pulse ? \":\" : \" \"}\n\t\t\t\t\t\t\t\t{m}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span>{prefix && `${prefix} `}</span>\n\t\t\t\t\t\t\t<span>{isBC ? \"around\" : \"in\"}</span> the year{\" \"}\n\t\t\t\t\t\t\t{h > 0 && h}\n\t\t\t\t\t\t\t{m}\n\t\t\t\t\t\t\t{isBC && \" BC\"}\n\t\t\t\t\t\t\t?!\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{html ? (\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>{raw ?? wikiDefault[0]}</p>\n\t\t\t\t\t)}\n\t\t\t\t</article>\n\t\t\t\t<footer>\n\t\t\t\t\t{/* {isDebug && <pre>{JSON.stringify(full, null, 2)} </pre>} */}\n\t\t\t\t\t<center>\n\t\t\t\t\t\twith {\"<3\"}{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName={\"author\"}\n\t\t\t\t\t\t\ttarget={\"_blank\"}\n\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\"https://dailysh.it?sendWithLoveFromWikiDailyshIt\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tdailysh.it\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</center>\n\t\t\t\t</footer>\n\t\t\t</main>\n\t\t</div>\n\t)\n}\nexport default Index\n","// extracted by mini-css-extract-plugin\nexport var page = \"index-module--page--3eaQQ\";\nexport var bc = \"index-module--bc--2MECj\";\nexport var author = \"index-module--author--12Pa7\";"],"names":["roman_map","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","allChars","Object","keys","allNumerals","values","module","exports","deromanize","romanStr","romanString","toUpperCase","arabic","iteration","length","cumulative","romanize","decimal","Error","roman","i","counter","buckets","fn","delay","latestCallback","useRef","useEffect","current","interval_1","ms","_a","id","listeners","timer","setInterval","lastError","didThrow","_i","listener","error","bucket","setHarmonicInterval","hasListeners","clearInterval","clearHarmonicInterval","effect","useState","isBC","setBC","topic","setTopic","pulse","setPulse","wikiDefault","setFull","wiki","setWiki","raw","html","h","setH","m","setM","s","setS","fetchData","query","year","parseInt","fetch","baseUrl","then","res","json","data","AC","BC","category","Date","getFullYear","item","closest","random","update","interval","getHours","toString","getMinutes","slice","getSeconds","nextH","nextM","nextS","remainerS","roundedNextS","Math","floor","updateEachSecond","useHarmonicIntervalFn","useEffectOnce","__html","replace","prefix","list","map","Map","get","topics","useTopics","className","style","height","abs","cos","PI","onClick","key","findIndex","t","role","tabIndex","dangerouslySetInnerHTML","target","href"],"sourceRoot":""}